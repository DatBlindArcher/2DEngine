package game.engine;

import javafx.application.Application;
import javafx.scene.Camera;
import javafx.scene.Group;
import javafx.scene.PerspectiveCamera;
import javafx.scene.paint.Color;
import javafx.scene.shape.Box;
import javafx.scene.transform.Translate;
import javafx.stage.Stage;

public class Game extends Application
{
	private String title;
	static Group root = new Group();
	
	public void run(String[] args, String title, int width, int height)
	{
		this.title = title;
		Screen.width = width;
		Screen.height = height;
		launch(args);
	}
	
	public void start(Stage primaryStage)
	{
        Scene scene = new Scene();
        scene.setFill(Color.DIMGRAY);
        SceneManager.activeScene = scene;
        
        primaryStage.setResizable(true);
        primaryStage.setTitle(title);
        primaryStage.setScene(scene);
        primaryStage.show();
        
        Camera defaultCamera = new PerspectiveCamera(true);
        defaultCamera.getTransforms().addAll(new Translate(0, 0, -10));
        scene.setCamera(defaultCamera);
        
        // Experimenting
        GameObject obj = new GameObject("Box", new Component[] { new Renderer(new Box(1, 1, 1)), new Collider(new Box(1, 1, 1)) });
        obj.transform.rotate(new Vector3(45, 0, 0));
        obj.transform.rotate(new Vector3(0, 45, 0));
        obj.transform.rotate(new Vector3(0, 0, 45));
        obj.transform.setRotation(new Vector3(0, 0, 0));
        obj.transform.translate(new Vector3(2, -1, 0));
        obj.transform.scale(new Vector3(1, 0.5, 0.5));
        scene.addGameObject(obj);
        scene.addGameObject(new GameObject("Box2", new Component[] { new Renderer(new Box(1, 1, 1)), new Collider(new Box(1, 1, 1)) }));
        obj.getComponent(Collider.class).collide();
	}
}