package game.engine;

import java.util.*;

public class Animation extends Component
{
	private boolean running;
	private int frameIndex;
	public float time;
	public AnimationFrame[] frames;
	
	public Animation(boolean runByDefault, List<AnimationFrame> frames)
	{
		running = runByDefault;
		frames.sort(new AnimationFrameHandler());
		this.frames = (AnimationFrame[])frames.toArray();
		time = 0f;
		frameIndex = 0;
	}
	
	public void run(boolean doRun)
	{
		running = doRun;
		time = 0f;
		frameIndex = 0;
	}
	
	public void update()
	{
		if(running)
		{
			time += Time.deltaTime;
			time = time >= frames[frames.length - 1].time ? time - frames[frames.length - 1].time : time;
			
			while(time > frames[frameIndex].time)
			{
				frames[frameIndex].run();
				frameIndex++;
			}
		}
	}
}