package game.engine;

import java.awt.*;
import java.awt.image.BufferedImage;

public class Button extends Component
{
	public String content
	public Rect rect;
	public BufferedImage button;
	
	public void draw(Graphics g)
	{
		if(Game.instance.getMousePosition() == null) return false;
		boolean hover = Math.abs(Game.instance.getMousePosition().x) > Math.abs(rect.x) &&
				Math.abs(Game.instance.getMousePosition().x) < Math.abs(rect.x + rect.width) &&
				Math.abs(Game.instance.getMousePosition().y) > Math.abs(rect.y + rect.height / 2f) &&
				Math.abs(Game.instance.getMousePosition().y) < Math.abs(rect.y + rect.height * 1.5f);
		Color color = hover ? new Color(150, 150, 150, 255) : new Color(200, 200, 200, 255);

		BufferedImage result = new BufferedImage(button.getWidth(), button.getHeight(), BufferedImage.TYPE_INT_ARGB_PRE);
        Graphics2D img = (Graphics2D)result.getGraphics();
        img.drawImage(button, 0, 0, Game.instance);
        img.setColor(color);
        img.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_ATOP, (float)color.getAlpha() / 255f));
        img.fillRect(0, 0, button.getWidth(), button.getHeight());
		g.drawImage(result, rect.x, rect.y, rect.width, rect.height, Game.instance);
		
		g.setColor(Color.black);
	    FontMetrics metrics = g.getFontMetrics();
	    int x = (rect.width - metrics.stringWidth(content)) / 2 + rect.x;
	    int y = ((rect.height - metrics.getHeight()) / 2) + metrics.getAscent() + rect.y;
		graphics.drawString(content, x, y);
		return hover && Input.getMouseButtonDown(0);
	}
}