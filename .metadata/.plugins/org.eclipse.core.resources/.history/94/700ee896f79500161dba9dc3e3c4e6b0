package game.engine;

import java.awt.Color;
import java.awt.event.KeyEvent;

public class CharacterController extends Component
{
	public void update()
	{
		int x = 0;
		int y = 0;
		
		if(Input.getKey(KeyEvent.VK_UP))
		{
			y--;
		}
		
		if(Input.getKey(KeyEvent.VK_DOWN))
		{
			y++;
		}
		
		if(Input.getKey(KeyEvent.VK_LEFT))
		{
			x--;
		}
		
		if(Input.getKey(KeyEvent.VK_RIGHT))
		{
			x++;
		}

		Vector2 direction = new Vector2(x, y).normalized();
		RaycastHit[] hits = Physics.raycast(transform.position, direction, (x != 0 ? 16f : y != 0 ? 16f : 0f));
		System.out.println("Hits: " + hits.length);
		
		for(RaycastHit hit : hits)
		{
			System.out.println("There is " + hit.gameObject.name + " on " + hit.point.toString());
			GameObject block = new GameObject("Block", new Component[] { new Image("Images/Square.png", 10, new Color(200, 40, 20, 255)) });
			block.transform.scale = new Vector2(0.1f, 0.1f);
			GameObject.create(block, hit.point, 0f);
		}
		
		if(hits.length == 0)
			transform.position.add(direction);
	}
}