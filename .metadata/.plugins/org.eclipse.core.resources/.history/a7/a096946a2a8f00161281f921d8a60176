package game.engine;

public class SquareCollider extends Collider 
{
	public Rect square;
	
	public void start()
	{
		super.start();
		square = new Rect((int)gameObject.transform.position.x - (int)(gameObject.transform.scale.x * 16f),
				(int)gameObject.transform.position.y - (int)(gameObject.transform.scale.y * 16f),
				(int)(gameObject.transform.scale.x * 32f),
				(int)(gameObject.transform.scale.y * 32f));
	}
	
	public void collide()
	{
		for(int i = 0; i < Game.instance.activeScene.gameObjects.size(); i++)
		{
			SquareCollider c;
			
			if((c = Game.instance.activeScene.gameObjects.get(i).getComponent(SquareCollider.class)) != null)
			{
				if (c.gameObject == gameObject) continue;
				if (square.x < c.square.x + c.square.width &&
				   square.x + square.width > c.square.x &&
				   square.y < c.square.y + c.square.height &&
				   square.height + square.y > c.square.y) 
				{
					onCollisionStart((Collider)c);
				}
			}
		}
	}
	
	public void update()
	{
		super.update();
		square = new Rect((int)gameObject.transform.position.x - (int)(gameObject.transform.scale.x * 16f),
				(int)gameObject.transform.position.y - (int)(gameObject.transform.scale.y * 16f),
				(int)(gameObject.transform.scale.x * 32f),
				(int)(gameObject.transform.scale.y * 32f));
	}
	
	public void onCollisionStart(Collider col)
	{
		super.onCollisionStart(col);
		//System.out.println(gameObject.name + square.toString() + " collided with " + col.gameObject.name + ((SquareCollider)col).square.toString());
	}
}